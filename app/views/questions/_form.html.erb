<%= form_for(@question) do |f| %>
  <% if @question.errors.any? %>
    <div id="error_explanation">
      <h2><%= pluralize(@question.errors.count, "error") %> prohibited this question from being saved:</h2>

      <ul>
      <% @question.errors.full_messages.each do |message| %>
        <li><%= message %></li>
      <% end %>
      </ul>
    </div>
  <% end %>

  <div class="field">
    <%= f.label :content %><br>
    <%= f.text_area :content %>
  </div>
  <div class="field">
    <%= f.label :difficulty %><br>
    <%= f.select :difficulty, options_for_select(["kerge", "keskmine", "raske"]) %>
  </div>
  <div class="field">
    <%= f.label :status %><br>
    <%= f.select :status, options_for_select(["Kinnitamata", "Kinnitatud", "Lukustatud"]) %>
  </div>

<fieldset id="answers">
  <legend>Answers</legend>
   <button onclick="addInput()"  type="button">Add answer</button><br/>
    <%#  AT THE MOMENT THERE IS ONLY ONE ANSWER  %>
    <% if @answers=@question.answers and !@question.answers.empty? then 
          @answers.each do |answer|
      %>
      <!-- EDIT EXISTING ANSWER-->
      <p class="answer">
              <%= hidden_field_tag 'answer[][id]' ,answer.id  %>
              <%# text_field(:answer, :content, :placeholder => "enter the answer", :value=>answer.content ) %>
              <%= text_area_tag 'answer[][content]' , answer.content %><br/>
              <%= number_field_tag 'answer[][points]', answer.points , :size => 4 %>
              correct? <%= check_box_tag 'answer[][correct]', true, answer.correct %>
              </p>
          <% end %>
    <%else%>
    <p class="answer">
       <%= text_area_tag 'answer[][content]' %><br/>
       <%= number_field_tag 'answer[][points]', :size => "4" %>
       correct? <%= check_box_tag 'answer[][correct]', true %>
       </p>
    <% end %>
      

</fieldset>


  <div class="actions">
    <%= f.submit %>
  </div>
<% end %>
<script>
answers=$("#answers");
  inputs='<p class="answer"><textarea name="answer[][content]" placeholder="answer text"></textarea> <br/><input type="number" name="answer[][points]" placeholder="points" size="4"/> correct? <input type="checkbox" name="answer[][correct]" /></p>';
function addInput(){
  answers.append(inputs);
}
</script>